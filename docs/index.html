<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Training Log</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans p-6">
  <div class="max-w-7xl mx-auto bg-white rounded shadow p-6 overflow-auto">
    <h1 class="text-2xl font-bold mb-4">üìà DistilBERT Training Log</h1>
    <table class="min-w-full table-auto border border-gray-300 text-sm">
      <thead class="bg-gray-200" id="table-head">
        <!-- JS will insert headers -->
      </thead>
      <tbody id="log-body" class="bg-white">
        <!-- JS will insert data rows -->
      </tbody>
    </table>
  </div>

  <script>
    fetch("log.json")
      .then(res => res.json())
      .then(data => {
        if (!Array.isArray(data) || data.length === 0) return;

        const headers = Array.from(
          new Set(data.flatMap(row => Object.keys(row)))
        );

        const thead = document.getElementById("table-head");
        const headerRow = document.createElement("tr");
        headers.forEach(h => {
          const th = document.createElement("th");
          th.className = "px-3 py-2 text-left font-semibold";
          th.textContent = h;
          headerRow.appendChild(th);
        });
        thead.appendChild(headerRow);

        const tbody = document.getElementById("log-body");
        data.forEach(row => {
          const tr = document.createElement("tr");
          tr.className = "border-t border-gray-200";
          headers.forEach(h => {
            const td = document.createElement("td");
            td.className = "px-3 py-1 whitespace-nowrap";
            const val = row[h];
            td.textContent = (typeof val === "number" ? val.toFixed(4) : val) ?? "";
            tr.appendChild(td);
          });
          tbody.appendChild(tr);
        });
      })
      .catch(err => {
        document.getElementById("log-body").innerHTML =
          `<tr><td colspan="100%" class="px-4 py-2 text-red-500">‚ö†Ô∏è Failed to load log.json: ${err}</td></tr>`;
      });
  </script>
</body>
</html>
